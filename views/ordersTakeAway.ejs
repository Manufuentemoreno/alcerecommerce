<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="stylesheet" href="/css/theme-users.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor"
      crossorigin="anonymous"
    />
    <%- include("partials/head") %>
    <title>Lista de ordenes</title>
  </head>
  <body>
    <%- include("partials/topBar") %>
    <main class="bg-lightgrey p-8 w-90 m-center mt-15 mb-15">
      <h1>Listado de ordenes</h1>
      <section>
        <h2>Ordenes en preparación</h2>
        <table class="table table-sm">
          <thead>
            <tr>
              <th scope="col">Listo</th>
              <th scope="col">Detalle</th>
              <th scope="col">Id</th>
              <th scope="col">Estado</th>
              <th scope="col">Met. envío</th>
              <th scope="col">Met. pago</th>
              <th scope="col">Fecha</th>
            </tr>
          </thead>
          <tbody>
            <% for( let i=0; i < ordenesConRetiro.length; i++ ) { %>
            <tr>
              <td>
                <form action="/orders/<%= ordenesConRetiro[i].id %>/listo?_method=PUT" method="POST">
                  <button type="submit">Listo</button>
                </form>
              </td>
              <td>
                <form action="/orders/detail/<%= ordenesConRetiro[i].id %>/" method="GET">
                  <button type="submit">Detalle</button>
                </form>
              </td>
              <td><%= ordenesConRetiro[i].id %></td>
              <td><%= ordenesConRetiro[i].order_status %></td>
              <td><%= ordenesConRetiro[i].delivery_method %></td>
              <td><%= ordenesConRetiro[i].payment_method %></td>
              <td><%= ordenesConRetiro[i].order_date %></td>
            </tr>
            <% } %>
          </tbody>
        </table>
      </section>
      <section>
        <h2>Ordenes listas</h2>
        <table class="table table-sm">
          <thead>
            <tr>
              <th scope="col">Acción</th>
              <th scope="col">Id</th>
              <th scope="col">Estado</th>
              <th scope="col">Met. envío</th>
              <th scope="col">Met. pago</th>
              <th scope="col">Actualización</th>
            </tr>
          </thead>
          <tbody>
            <% for( let i=0; i < ordenesConRetiroListas.length; i++ ) { %>
            <tr>
              <td>
                <form action="/orders/<%= ordenesConRetiroListas[i].id %>/retirado?_method=PUT" method="POST">
                  <button type="submit">Retirado</button>
                </form>
              </td>
              <td><%= ordenesConRetiroListas[i].id %></td>
              <td><%= ordenesConRetiroListas[i].order_status %></td>
              <td><%= ordenesConRetiroListas[i].delivery_method %></td>
              <td><%= ordenesConRetiroListas[i].payment_method %></td>
              <td><%= ordenesConRetiroListas[i].updatedAt %></td>
            </tr>
            <% } %>
          </tbody>
        </table>
      </section>
      <section>
        <h2>Ordenes retiradas</h2>
        <table class="table table-sm">
          <thead>
            <tr>
              <th scope="col">Acción</th>
              <th scope="col">Id</th>
              <th scope="col">Estado</th>
              <th scope="col">Met. envío</th>
              <th scope="col">Met. pago</th>
              <th scope="col">Actualización</th>
            </tr>
          </thead>
          <tbody>
            <% for( let i=0; i < ordenesConRetiroRetiradas.length; i++ ) { %>
            <tr>
              <td>
                <form action="/orders/<%= ordenesConRetiroRetiradas[i].id %>/retirado?_method=PUT" method="POST">
                  <button type="submit">Borrar</button>
                </form>
              </td>
              <td><%= ordenesConRetiroRetiradas[i].id %></td>
              <td><%= ordenesConRetiroRetiradas[i].order_status %></td>
              <td><%= ordenesConRetiroRetiradas[i].delivery_method %></td>
              <td><%= ordenesConRetiroRetiradas[i].payment_method %></td>
              <td><%= ordenesConRetiroRetiradas[i].updatedAt %></td>
            </tr>
            <% } %>
          </tbody>
        </table>
      </section>
    </main>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
